import{j as e,t as g,r as N,u as h,m as p,E as w,A,n as C,o as S,q as L,F as I}from"./vendor-71757edf.js";import{u as k,b as F,C as R,R as U,H as v,D as j,f as y,a as q,A as E}from"./formatting-715c1b8f.js";import{I as b}from"./index-f5596d4c.js";const z=r=>{const{children:s,className:a}=r;return e.jsx("h4",{className:g("text-2xl font-bold dark:text-white mb-3",a),children:s})},H=(r,s)=>{const a=k(n=>n[s][r.id]),{cards:t=0,level:l=0}=a??{},{cardsNeeded:c,coinsNeeded:i,maxLevelAvailable:o,remainingCards:x}=N.useMemo(()=>F(r.stats,l,t),[r.stats,t,l]),d=o>l&&l!==0;return{cardsNeeded:c,coinsNeeded:i,isUpgradable:d,maxLevelAvailable:o,remainingCards:x}},K={common:"bg-blue-100 dark:bg-blue-900",epic:"bg-fuchsia-100 dark:bg-fuchsia-900",rare:"bg-orange-100 dark:bg-orange-900",stock:"bg-gray-100 dark:bg-gray-900"},M=r=>{const{asset:s,assetKey:a}=r,{t}=h(),l=p(),{coinsNeeded:c,isUpgradable:i,maxLevelAvailable:o,cardsNeeded:x}=H(s,a),d=!1,n=s.rarity==="stock",m=()=>{n||l(s.id.toString())};return e.jsxs(R,{className:"",children:[e.jsx("div",{className:g("h-52 lg:h-60 w-full",K[s.rarity]),children:d}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex flex-col justify-between items-start mb-2 gap-2",children:[e.jsxs("button",{className:g("flex flex-row items-center gap-2 text-gray-900 dark:text-white",n?"cursor-not-allowed":"hover:underline hover:text-blue-600 hover:dark:text-blue-500"),onClick:m,children:[e.jsxs("h5",{className:"text-2xl font-bold tracking-tight",children:[s.name," "]}),!n&&e.jsx(b,{Icon:w,size:20})]}),i?e.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300 flex flex-row items-center gap-1",children:[e.jsx(b,{Icon:A,size:15}),t("upgradable")]}):e.jsx("span",{className:"py-2.5"})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center mb-3",children:[e.jsx("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:t("series",{series:s.series})}),e.jsx(U,{rarity:s.rarity})]}),e.jsx(v,{}),e.jsx(P,{cardsNeeded:x,coinsNeeded:c,maxLevelAvailable:o}),e.jsx(v,{}),e.jsx(G,{asset:s,assetKey:a})]})]},s.id)},B=r=>{const{children:s,className:a}=r;return e.jsx("div",{className:g("flex flex-row gap-3 items-center justify-between mb-3 flex-wrap",a),children:s})},G=r=>{const{asset:s,assetKey:a}=r,{t}=h(),{decreaseCollectedAssetCards:l,increaseCollectedAssetCards:c,updateCollectedAssetLevel:i,updateCollectedAssetCards:o,...x}=k(),d=x[a][s.id],n=s.rarity==="stock";let m=11;switch(s.rarity){case"common":m=11;break;case"epic":m=8;break;case"rare":m=9;break;case"stock":m=0;break;default:m=11;break}return e.jsxs("div",{className:"flex flex-row justify-between gap-5",children:[e.jsxs("div",{className:"w-1/3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",htmlFor:"level",children:t("level")}),e.jsx("select",{className:g("w-full p-1.5 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",n?"cursor-not-allowed":""),disabled:n,id:"level",onChange:u=>i(a,s.id,parseInt(u.target.value,10)),value:(d==null?void 0:d.level)??0,children:n?e.jsx("option",{value:1,children:"1"}):e.jsx(e.Fragment,{children:[...Array(m+1)].map((u,f)=>e.jsx("option",{value:f,children:f},f))})})]}),e.jsxs("div",{className:"w-2/3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",htmlFor:"cards",children:t("cards")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:g("p-2 text-xs font-medium text-center text-white bg-blue-700 hover:bg-blue-800 focus:outline-none rounded-lg inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700",n?"cursor-not-allowed bg-blue-400 dark:bg-blue-500 hover:bg-blue-400 hover:dark:bg-blue-500":""),disabled:n,onClick:()=>l(a,s.id),type:"button",children:[e.jsx(b,{Icon:C,size:15,variant:"Linear"}),e.jsx("span",{className:"sr-only",children:"Add"})]}),e.jsx("input",{className:g("p-1 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",n?"cursor-not-allowed":""),disabled:n,id:"cards",onChange:u=>o(a,s.id,Number.isNaN(u.target.valueAsNumber)?0:u.target.valueAsNumber),type:"number",value:(d==null?void 0:d.cards)??0}),e.jsxs("button",{className:g("p-2 text-xs font-medium text-center text-white bg-blue-700 hover:bg-blue-800 focus:outline-none rounded-lg inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700",n?"cursor-not-allowed bg-blue-400 dark:bg-blue-500 hover:bg-blue-400 hover:dark:bg-blue-500":""),disabled:n,onClick:()=>c(a,s.id),type:"button",children:[e.jsx(b,{Icon:S,size:15,variant:"Linear"}),e.jsx("span",{className:"sr-only",children:"Remove"})]})]})]})]})},P=r=>{const{cardsNeeded:s,coinsNeeded:a,maxLevelAvailable:t}=r,{t:l}=h();return e.jsxs("div",{className:"flex flex-row gap-2 divide-x justify-between divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"flex w-1/3 justify-center",children:e.jsx(j,{className:"text-center",term:l("maxLevelAvailable"),children:t})}),e.jsx("div",{className:"flex w-1/3 justify-center pl-2",children:e.jsx(j,{className:"text-center",term:l("cardsNeeded"),children:y(s)})}),e.jsx("div",{className:"flex w-1/3 justify-center pl-2",children:e.jsx(j,{className:"text-center",term:l("coinsNeeded"),children:y(a)})})]})},T=r=>{const{onChangeSearch:s}=r,{t:a}=h(["common"]);return e.jsxs("div",{className:"w-full max-w-sm max-sm:max-w-full",children:[e.jsx("label",{className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",htmlFor:"search",children:a("search")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(b,{Icon:L,className:"text-black dark:text-white"})}),e.jsx("input",{className:"block w-full p-3 pl-11 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",id:"search",onChange:t=>s(t.target.value),placeholder:a("search"),type:"search"})]})]})},W=r=>{const{children:s}=r;return e.jsx("div",{className:"grid max-sm:grid-cols-1 max-lg:grid-cols-2 max-2xl:grid-cols-3 grid-cols-4 gap-5",children:s})},_=(r,s)=>{const[a,t]=N.useState((s==null?void 0:s.initialSearch)??""),l=new I(r,{keys:["name"],shouldSort:!1,threshold:.4,...s==null?void 0:s.fuseConfig});return{filteredAssets:a.trim()?l.search(a).map(i=>i.item):r,search:a,setSearch:t}},Q=r=>{const{assets:s,assetKey:a,title:t}=r,{t:l}=h(),{filteredAssets:c,setSearch:i,search:o}=_(s);return e.jsxs(q,{maxWidth:"2xl",children:[e.jsxs(B,{children:[e.jsx(z,{className:"m-0",children:t}),e.jsx(T,{onChangeSearch:i})]}),c.length===0?e.jsx(E,{severity:"info",children:l("noResultsFor",{search:o})}):e.jsx(W,{children:c.map(x=>e.jsx(M,{asset:x,assetKey:a},x.id))})]})};export{Q as A};
